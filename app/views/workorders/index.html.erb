<% @title = "Work Orders" %>

<% content_for :description do %>
<h4>Work Orders Management Center </h4>
<% end %>

<% content_for :actions do %>
<%= link_to new_workorder_path, class: 'btn btn-primary btn-large' do %>
<%= fa_icon_tag "plus" %> Add Workorder
<% end %>&nbsp;
<%= link_to filter_workorders_path, class: 'btn btn-primary btn-large' do %>
<%= fa_icon_tag "filter" %> Filter the list
<% end %>&nbsp;
<%= link_to workorders_path, class: 'btn btn-primary btn-large' do %>
<%= fa_icon_tag "th-list" %> All the list
<% end %>
<% end %>

<div class="container">
  <div class="card card-full-height card-tabbed overflow-visible  ">
    <div class="card-header">
      <h6>TASKS</h6>
      <ul class="nav nav-tabs nav-tabs-primary card-header-tabs" id="navTab1"
      role="tablist">
        <li class="nav-item">
          <a class="nav-link active" data-toggle="tab" href="000_app_cards.html#navTab11"
          role="tab" aria-controls="navTab11" aria-expanded="true">Open</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="000_app_cards.html#navTab12"
          role="tab" aria-controls="navTab12" aria-expanded="false">Completed</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="000_app_cards.html#navTab13"
          role="tab" aria-controls="navTab13" aria-expanded="false">Archived</a>
        </li>
      </ul>
    </div>
    <div class="card-body">
      <div class="tab-content" id="taskListContent">
        <div class="tab-pane fade active show" id="navTab11" role="tabpanel" aria-labelledby="navTab11"
        aria-expanded="true">
          <ol class="card-item-list">

            <li class="card-item card-item-chip-primary">
              <div class="checkbox">
                <input id="checkbox1" type="checkbox">
                <label for="checkbox1"></label>
              </div>
              <div class="card-item-body card-item-chip-primary mr-auto">
                <div class="leading-normal">Ascenceur de gauche bloqu√© au RDC</div>
                <small>
                  <time class="text-uppercase text-muted">Due by 07:00 26th Dec 2018</time>
                </small>
              </div>
            </li>

            <li class="card-item card-item-chip-dark">
              <div class="checkbox">
                <input id="checkbox2" type="checkbox">
                <label for="checkbox2"></label>
              </div>
              <div class="card-item-body mr-auto">
                <div class="leading-normal">Take the Ghoul friend for a Halloween zip line</div>
                <small>
                  <time class="text-uppercase text-muted">Due by 12:21 20th Dec 2018</time>
                </small>
              </div>

            </li>
            <li class="card-item card-item-chip-danger">
              <div class="checkbox">
                <input id="checkbox3" type="checkbox">
                <label for="checkbox3"></label>
              </div>
              <div class="card-item-body mr-auto">
                <div class="leading-normal">Rebuild laptop to remove Russian spyware</div>
                <small>
                  <time class="text-uppercase text-muted">Due by 09:00 19th Dec 2018</time>
                </small>
              </div>

            </li>
            <li class="card-item card-item-chip-warning">
              <div class="checkbox">
                <input id="checkbox4" type="checkbox">
                <label for="checkbox4"></label>
              </div>
              <div class="card-item-body mr-auto">
                <div class="leading-normal">Cash out Yowli coins before expiry</div>
                <small>
                  <time class="text-uppercase text-muted">Due by 00:00 1st Dec 2018</time>
                </small>
              </div>

            </li>
          </ol>
        </div>

      </div>
    </div>
  </div>
</div>


<div class="container">
  <div class="row">
    <div class="col-12 col-md-12">
      <div class="card sheet-condensed">
        <table class="table table-striped table-hover table-sm-responsive">
          <thead>
            <tr>
              <th>Status</th>
              <th>Address / Description</th>
              <th>Due Date / Date done</th>
              <th>Report</th>
              <th>Manager / Tech</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @workorders.each do |workorder| %>
            <tr>
              <td>
                <% if workorder.status == "Open" %>
                  <div class="card-body d-flex flex-column align-items-center justify-content-center  ">
                  <span style="font-size: 14px;"><i class="fa fa-unlock align-items-center"></i></span>
                  </div>
                <% end %>
                <% if workorder.status == "Scheduled" %>
                  <div class="card-body d-flex flex-column align-items-center justify-content-center  ">
                  <span style="font-size: 14px;"><i class="fa fa-calendar align-items-center"></i></span>
                  </div>
                <% end %>
                <% if workorder.status == "In progress" %>
                  <div class="card-body d-flex flex-column align-items-center justify-content-center  ">
                  <span style="font-size: 14px;"><i class="fa fa-refresh align-items-center"></i></span>
                  </div>
                <% end %>
                <% if workorder.status == "Closed" %>
                  <div class="card-body d-flex flex-column align-items-center justify-content-center  ">
                  <span style="font-size: 14px;"><i class="fa fa-lock align-items-center"></i></span>

                  </div>
                <% end %>
              </td>
              <td><%= workorder.address %> <br> <%= workorder.description %></td>
              <td><%= time_ago_in_words(workorder.date_planned) %> <br>
                <%= workorder.date_done %></td>
              <td><%= workorder.report %></td>
              <td><%= workorder.manager.email %><br>
              <strong><%= workorder.technician.email %></strong></td>
              <td class="actions text-right">
                <div class="btn-group">
                  <%= link_to theme_icon_tag("eye"), workorder, 'data-toggle': 'tooltip', title: 'Show', class: "btn btn-link" %>
                  <%= link_to theme_icon_tag("pencil-alt"), edit_workorder_path(workorder), 'data-toggle': 'tooltip', title: 'Edit', class: "btn btn-link" %>
                  <%= link_to theme_icon_tag("trash"), workorder, 'data-toggle': 'tooltip', title: 'Delete',
                  data: { confirm: 'Are you sure?' }, method: :delete, class: 'btn btn-link' %>
                </div>
              </td>
            </tr>
            <% end %>
            <% if @workorders.length == 0 %>
            <tr><td colspan=42 class='text-center'>No workorders.</td></tr>
            <% end %>
          </tbody>
        </table>
      </div>

    </div>
  </div>
</div>
